<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mybatis/mybatis-plus | sazkii</title><meta name="author" content="sazkii"><meta name="copyright" content="sazkii"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="mybatis&#x2F;mybatis-plus一、mybatis https:&#x2F;&#x2F;www.cnblogs.com&#x2F;ssjxx98&#x2F;articles&#x2F;13374663.html   https:&#x2F;&#x2F;blog.csdn.net&#x2F;WwLK123&#x2F;article&#x2F;details&#x2F;131859424   https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_44863237&#x2F;article&#x2F;deta">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatis&#x2F;mybatis-plus">
<meta property="og:url" content="http://example.com/2024/06/27/mybatis-plus/index.html">
<meta property="og:site_name" content="sazkii">
<meta property="og:description" content="mybatis&#x2F;mybatis-plus一、mybatis https:&#x2F;&#x2F;www.cnblogs.com&#x2F;ssjxx98&#x2F;articles&#x2F;13374663.html   https:&#x2F;&#x2F;blog.csdn.net&#x2F;WwLK123&#x2F;article&#x2F;details&#x2F;131859424   https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_44863237&#x2F;article&#x2F;deta">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/74520977?s%E2%80%A600&u=060925dc0ee8e853e7c8dee426bd0ca3e9850dc2&v=4">
<meta property="article:published_time" content="2024-06-27T10:10:11.000Z">
<meta property="article:modified_time" content="2024-09-08T15:34:20.118Z">
<meta property="article:author" content="sazkii">
<meta property="article:tag" content="Spring Boot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars.githubusercontent.com/u/74520977?s%E2%80%A600&u=060925dc0ee8e853e7c8dee426bd0ca3e9850dc2&v=4"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/06/27/mybatis-plus/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mybatis/mybatis-plus',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-08 23:34:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/74520977?s…00&amp;u=060925dc0ee8e853e7c8dee426bd0ca3e9850dc2&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="sazkii"><span class="site-name">sazkii</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">mybatis/mybatis-plus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-27T10:10:11.000Z" title="发表于 2024-06-27 18:10:11">2024-06-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-08T15:34:20.118Z" title="更新于 2024-09-08 23:34:20">2024-09-08</time></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="mybatis-mybatis-plus"><a href="#mybatis-mybatis-plus" class="headerlink" title="mybatis&#x2F;mybatis-plus"></a>mybatis&#x2F;mybatis-plus</h1><h2 id="一、mybatis"><a href="#一、mybatis" class="headerlink" title="一、mybatis"></a>一、mybatis</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ssjxx98/articles/13374663.html">https://www.cnblogs.com/ssjxx98/articles/13374663.html</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/WwLK123/article/details/131859424">https://blog.csdn.net/WwLK123/article/details/131859424</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44863237/article/details/131122988">https://blog.csdn.net/weixin_44863237/article/details/131122988</a></p>
</blockquote>
<p>MyBatis是一个支持普通SQL查询、存储过程和高级映射的优秀持久层框架（ORM框架），可以使用简单的XML或注解配置，将接口和Java的POJO映射成数据库中的记录。</p>
<p>ORM概念：Object Relational Mapping，“对象关系映射”，解决了对象和关系型数据库之间的数据交互问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数据库表---&gt;实体类</span><br><span class="line">数据库表中字段---&gt;实体类的属性</span><br><span class="line">数据库表中字段的类型---&gt;实体类中属性的类型</span><br><span class="line">数据库表中记录---&gt;对象</span><br></pre></td></tr></table></figure>



<p>实例：</p>
<p>1.创建UserDao接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zpc.mybatis.pojo.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id查询用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; id</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@return</span>&lt;/span&gt;</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; User &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserById&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@return</span>&lt;/span&gt;</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; List&amp;lt;User&amp;gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserAll&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新增用户</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; user</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;insertUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; user</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;updateUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id删除用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; id</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;deleteUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id查询用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; id</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@return</span>&lt;/span&gt;</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; User &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserById&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@return</span>&lt;/span&gt;</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; List&amp;lt;User&amp;gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserAll&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 新增用户</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; user</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;insertUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 更新用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; user</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;updateUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据id删除用户信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;span class=&quot;hljs-doctag&quot;&gt;<span class="doctag">@param</span>&lt;/span&gt; id</span></span><br><span class="line"><span class="comment"> */</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;deleteUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt;&lt;/span&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.创建UserDaoImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zpc.mybatis.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.zpc.mybatis.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;UserDaoImpl&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(SqlSession sqlSession)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession = sqlSession;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; User &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserById&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">return</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.selectOne(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.queryUserById&quot;</span>&lt;/span&gt;, id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; List&amp;lt;User&amp;gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserAll&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">return</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.selectList(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.queryUserAll&quot;</span>&lt;/span&gt;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;insertUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.insert(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.insertUser&quot;</span>&lt;/span&gt;, user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;updateUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.update(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.updateUser&quot;</span>&lt;/span&gt;, user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;deleteUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.delete(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.deleteUser&quot;</span>&lt;/span&gt;, id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;UserDaoImpl&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(SqlSession sqlSession)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession = sqlSession;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; User &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserById&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">return</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.selectOne(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.queryUserById&quot;</span>&lt;/span&gt;, id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; List&amp;lt;User&amp;gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserAll&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">return</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.selectList(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.queryUserAll&quot;</span>&lt;/span&gt;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;insertUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.insert(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.insertUser&quot;</span>&lt;/span&gt;, user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;updateUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(User user)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.update(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.updateUser&quot;</span>&lt;/span&gt;, user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Override</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;deleteUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;(String id)&lt;/span&gt; &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.delete(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;UserDao.deleteUser&quot;</span>&lt;/span&gt;, id);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.UserDao对应的UserDaoMapper.xml</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;!-- mapper:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 --&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;UserDao&quot;</span>&gt;</span><br><span class="line">    &lt;!-- statement，内容：sql语句。id：唯一标识，随便写，在同一个命名空间下保持唯一</span><br><span class="line">       resultType：sql语句查询结果集的封装类型,tb_user即为数据库中的表</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;!--&lt;select id=<span class="string">&quot;queryUserById&quot;</span> resultType=<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&gt;--&gt;</span><br><span class="line">    &lt;!--select * from tb_user <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> #&#123;id&#125;--&gt;</span><br><span class="line">    &lt;!--&lt;/select&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;&amp;lt;!--使用别名--&amp;gt;&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;select&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;queryUserById&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;resultType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">  select</span><br><span class="line">   tuser.id as id,</span><br><span class="line">   tuser.user_name as userName,</span><br><span class="line">   tuser.password as password,</span><br><span class="line">   tuser.name as name,</span><br><span class="line">   tuser.age as age,</span><br><span class="line">   tuser.birthday as birthday,</span><br><span class="line">   tuser.sex as sex,</span><br><span class="line">   tuser.created as created,</span><br><span class="line">   tuser.updated as updated</span><br><span class="line">   from</span><br><span class="line">   tb_user tuser</span><br><span class="line">   where tuser.id = #&#123;id&#125;;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;select&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;queryUserAll&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;resultType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    select * from tb_user;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;&amp;lt;!--插入数据--&amp;gt;&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;insert&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;insertUser&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;parameterType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    INSERT INTO <span class="title function_">tb_user</span> <span class="params">(</span></span><br><span class="line"><span class="params">    user_name,</span></span><br><span class="line"><span class="params">    password,</span></span><br><span class="line"><span class="params">    name,</span></span><br><span class="line"><span class="params">    age,</span></span><br><span class="line"><span class="params">    sex,</span></span><br><span class="line"><span class="params">    birthday,</span></span><br><span class="line"><span class="params">    created,</span></span><br><span class="line"><span class="params">    updated</span></span><br><span class="line"><span class="params">    )</span></span><br><span class="line">    VALUES</span><br><span class="line">    (</span><br><span class="line">    #&#123;userName&#125;,</span><br><span class="line">    #&#123;password&#125;,</span><br><span class="line">    #&#123;name&#125;,</span><br><span class="line">    #&#123;age&#125;,</span><br><span class="line">    #&#123;sex&#125;,</span><br><span class="line">    #&#123;birthday&#125;,</span><br><span class="line">    now(),</span><br><span class="line">    now()</span><br><span class="line">    );</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;insert&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;update&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;updateUser&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;parameterType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    UPDATE tb_user</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;trim&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;prefix&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;set&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;suffixOverrides&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;,&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;userName!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;user_name = #&#123;userName&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;password!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;password = #&#123;password&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;name!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;name = #&#123;name&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;age!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;age = #&#123;age&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;sex!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;sex = #&#123;sex&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;birthday!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;birthday = #&#123;birthday&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        updated = now(),</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;trim&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    WHERE</span><br><span class="line">    (id = #&#123;id&#125;);</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;update&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;delete&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;deleteUser&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    delete from tb_user where id=#&#123;id&#125;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;delete&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;&amp;lt;!--使用别名--&amp;gt;&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;select&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;queryUserById&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;resultType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">  select</span><br><span class="line">   tuser.id as id,</span><br><span class="line">   tuser.user_name as userName,</span><br><span class="line">   tuser.password as password,</span><br><span class="line">   tuser.name as name,</span><br><span class="line">   tuser.age as age,</span><br><span class="line">   tuser.birthday as birthday,</span><br><span class="line">   tuser.sex as sex,</span><br><span class="line">   tuser.created as created,</span><br><span class="line">   tuser.updated as updated</span><br><span class="line">   from</span><br><span class="line">   tb_user tuser</span><br><span class="line">   where tuser.id = #&#123;id&#125;;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;select&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;queryUserAll&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;resultType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    select * from tb_user;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;select&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;&amp;lt;!--插入数据--&amp;gt;&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;insert&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;insertUser&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;parameterType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    INSERT INTO <span class="title function_">tb_user</span> <span class="params">(</span></span><br><span class="line"><span class="params">    user_name,</span></span><br><span class="line"><span class="params">    password,</span></span><br><span class="line"><span class="params">    name,</span></span><br><span class="line"><span class="params">    age,</span></span><br><span class="line"><span class="params">    sex,</span></span><br><span class="line"><span class="params">    birthday,</span></span><br><span class="line"><span class="params">    created,</span></span><br><span class="line"><span class="params">    updated</span></span><br><span class="line"><span class="params">    )</span></span><br><span class="line">    VALUES</span><br><span class="line">    (</span><br><span class="line">    #&#123;userName&#125;,</span><br><span class="line">    #&#123;password&#125;,</span><br><span class="line">    #&#123;name&#125;,</span><br><span class="line">    #&#123;age&#125;,</span><br><span class="line">    #&#123;sex&#125;,</span><br><span class="line">    #&#123;birthday&#125;,</span><br><span class="line">    now(),</span><br><span class="line">    now()</span><br><span class="line">    );</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;insert&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;update&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;updateUser&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;parameterType&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;com.zpc.mybatis.pojo.User&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    UPDATE tb_user</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;trim&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;prefix&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;set&quot;</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;suffixOverrides&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;,&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;userName!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;user_name = #&#123;userName&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;password!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;password = #&#123;password&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;name!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;name = #&#123;name&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;age!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;age = #&#123;age&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;sex!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;sex = #&#123;sex&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;test&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;birthday!=null&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;birthday = #&#123;birthday&#125;,&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;<span class="keyword">if</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">        updated = now(),</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;trim&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    WHERE</span><br><span class="line">    (id = #&#123;id&#125;);</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;update&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;delete&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-attr&quot;</span>&gt;id&lt;/span&gt;=&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;deleteUser&quot;</span>&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">    delete from tb_user where id=#&#123;id&#125;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-tag&quot;</span>&gt;&amp;lt;/&lt;span class=<span class="string">&quot;hljs-name&quot;</span>&gt;delete&lt;/span&gt;&amp;gt;&lt;/span&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>并在mybatis-config.xml中添加配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;mapper resource=&quot;mappers/MyMapper.xml&quot;/&gt;</span><br><span class="line">    &lt;mapper resource=&quot;mappers/UserDaoMapper.xml&quot;/&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.测试用例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zpc.mybatis.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.zpc.mybatis.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.zpc.mybatis.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoTest</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; UserDao userDao;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Before</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;setUp&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// mybatis-config.xml&lt;/span&gt;</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;mybatis-config.xml&quot;</span>&lt;/span&gt;;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// 读取配置文件&lt;/span&gt;</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// 构建SqlSessionFactory&lt;/span&gt;</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; SqlSessionFactoryBuilder().build(is);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// 获取sqlSession&lt;/span&gt;</span></span><br><span class="line">    sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao = &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; UserDaoImpl(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserById&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    System.out.println(&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.queryUserById(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;1&quot;</span>&lt;/span&gt;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserAll&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    List&amp;lt;User&amp;gt; userList = &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.queryUserAll();</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">for</span>&lt;/span&gt; (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;insertUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; User();</span><br><span class="line">    user.setAge(&lt;span class=<span class="string">&quot;hljs-number&quot;</span>&gt;<span class="number">16</span>&lt;/span&gt;);</span><br><span class="line">    user.setBirthday(&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; Date(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;1990/09/02&quot;</span>&lt;/span&gt;));</span><br><span class="line">    user.setName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;大鹏&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setPassword(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;123456&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setSex(&lt;span class=<span class="string">&quot;hljs-number&quot;</span>&gt;<span class="number">1</span>&lt;/span&gt;);</span><br><span class="line">    user.setUserName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;evan&quot;</span>&lt;/span&gt;);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.insertUser(user);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;updateUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; User();</span><br><span class="line">    user.setBirthday(&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; Date());</span><br><span class="line">    user.setName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;静鹏&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setPassword(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;654321&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setSex(&lt;span class=<span class="string">&quot;hljs-number&quot;</span>&gt;<span class="number">1</span>&lt;/span&gt;);</span><br><span class="line">    user.setUserName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;evanjin&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setId(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;1&quot;</span>&lt;/span&gt;);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.updateUser(user);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;deleteUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.deleteUser(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;4&quot;</span>&lt;/span&gt;);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; UserDao userDao;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Before</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;setUp&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// mybatis-config.xml&lt;/span&gt;</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;mybatis-config.xml&quot;</span>&lt;/span&gt;;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// 读取配置文件&lt;/span&gt;</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// 构建SqlSessionFactory&lt;/span&gt;</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; SqlSessionFactoryBuilder().build(is);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-comment&quot;</span>&gt;<span class="comment">// 获取sqlSession&lt;/span&gt;</span></span><br><span class="line">    sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao = &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; UserDaoImpl(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserById&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    System.out.println(&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.queryUserById(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;1&quot;</span>&lt;/span&gt;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;queryUserAll&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    List&amp;lt;User&amp;gt; userList = &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.queryUserAll();</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">for</span>&lt;/span&gt; (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;insertUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; User();</span><br><span class="line">    user.setAge(&lt;span class=<span class="string">&quot;hljs-number&quot;</span>&gt;<span class="number">16</span>&lt;/span&gt;);</span><br><span class="line">    user.setBirthday(&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; Date(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;1990/09/02&quot;</span>&lt;/span&gt;));</span><br><span class="line">    user.setName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;大鹏&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setPassword(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;123456&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setSex(&lt;span class=<span class="string">&quot;hljs-number&quot;</span>&gt;<span class="number">1</span>&lt;/span&gt;);</span><br><span class="line">    user.setUserName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;evan&quot;</span>&lt;/span&gt;);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.insertUser(user);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;updateUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; User();</span><br><span class="line">    user.setBirthday(&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">new</span>&lt;/span&gt; Date());</span><br><span class="line">    user.setName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;静鹏&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setPassword(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;654321&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setSex(&lt;span class=<span class="string">&quot;hljs-number&quot;</span>&gt;<span class="number">1</span>&lt;/span&gt;);</span><br><span class="line">    user.setUserName(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;evanjin&quot;</span>&lt;/span&gt;);</span><br><span class="line">    user.setId(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;1&quot;</span>&lt;/span&gt;);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.updateUser(user);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-meta&quot;</span>&gt;<span class="meta">@Test</span>&lt;/span&gt;</span><br><span class="line">&lt;span class=<span class="string">&quot;hljs-function&quot;</span>&gt;&lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">public</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">void</span>&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-title&quot;</span>&gt;deleteUser&lt;/span&gt;&lt;span class=<span class="string">&quot;hljs-params&quot;</span>&gt;()&lt;/span&gt; &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="keyword">throws</span>&lt;/span&gt; Exception &lt;/span&gt;&#123;</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.userDao.deleteUser(&lt;span class=<span class="string">&quot;hljs-string&quot;</span>&gt;<span class="string">&quot;4&quot;</span>&lt;/span&gt;);</span><br><span class="line">    &lt;span class=<span class="string">&quot;hljs-keyword&quot;</span>&gt;<span class="built_in">this</span>&lt;/span&gt;.sqlSession.commit();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h3><h4 id="1-if"><a href="#1-if" class="headerlink" title="1.if"></a>1.if</h4><p>解决判断空的问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;if test=&quot;判断条件&quot;&gt; SQL语句&lt;/if&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-where"><a href="#2-where" class="headerlink" title="2.where"></a>2.where</h4><p>where+if可以实现查询、模糊查询等</p>
<p>在&lt;where&gt;and&lt;&#x2F;where&gt;包围中的and、or只起到拼接作用</p>
<p>这个“where”标签会知道如果它包含的标签中有返回值的话，它就插入一个‘where’。此外，如果标签返回的内容是以AND 或OR 开头的，则它会剔除掉。 </p>
<h4 id="3-set"><a href="#3-set" class="headerlink" title="3.set"></a>3.set</h4><p>用来修改</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;upd&quot;</span>&gt;</span></span><br><span class="line">    update student</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sname != null&quot;</span>&gt;</span>sname=#&#123;sname&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spwd != null&quot;</span>&gt;</span>spwd=#&#123;spwd&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span>sex=#&#123;sex&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span>phone=#&#123;phone&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    sid=#&#123;sid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where sid=#&#123;sid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-choose"><a href="#4-choose" class="headerlink" title="4.choose"></a>4.choose</h4><p>choose+when+otherwise相当于switch语句，符合条件才会执行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>&quot;selectUserByChoose&quot; resultType<span class="operator">=</span>&quot;com.ys.po.User&quot; parameterType<span class="operator">=</span>&quot;com.ys.po.User&quot;<span class="operator">&gt;</span></span><br><span class="line">      <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span></span><br><span class="line">      <span class="operator">&lt;</span><span class="keyword">where</span><span class="operator">&gt;</span></span><br><span class="line">          <span class="operator">&lt;</span>choose<span class="operator">&gt;</span></span><br><span class="line">              <span class="operator">&lt;</span><span class="keyword">when</span> test<span class="operator">=</span>&quot;id !=&#x27;&#x27; and id != null&quot;<span class="operator">&gt;</span></span><br><span class="line">                  id<span class="operator">=</span>#&#123;id&#125;</span><br><span class="line">              <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">when</span><span class="operator">&gt;</span></span><br><span class="line">              <span class="operator">&lt;</span><span class="keyword">when</span> test<span class="operator">=</span>&quot;username !=&#x27;&#x27; and username != null&quot;<span class="operator">&gt;</span></span><br><span class="line">                  <span class="keyword">and</span> username<span class="operator">=</span>#&#123;username&#125;</span><br><span class="line">              <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">when</span><span class="operator">&gt;</span></span><br><span class="line">              <span class="operator">&lt;</span>otherwise<span class="operator">&gt;</span></span><br><span class="line">                  <span class="keyword">and</span> sex<span class="operator">=</span>#&#123;sex&#125;</span><br><span class="line">              <span class="operator">&lt;</span><span class="operator">/</span>otherwise<span class="operator">&gt;</span></span><br><span class="line">          <span class="operator">&lt;</span><span class="operator">/</span>choose<span class="operator">&gt;</span></span><br><span class="line">      <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">where</span><span class="operator">&gt;</span></span><br><span class="line">  <span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>也就是说，这里我们有三个条件，id、username、sex，只能选择一个作为查询条件</p>
<ul>
<li>如果 id 不为空，那么查询语句为：select * from user where id&#x3D;?</li>
<li>如果 id 为空，那么看username 是否为空，如果不为空，那么语句为select * from user where username&#x3D;?;</li>
<li>如果 username 为空，那么查询语句为 select * from user where sex&#x3D;?</li>
</ul>
<h4 id="5-trim标记"><a href="#5-trim标记" class="headerlink" title="5.trim标记"></a>5.trim标记</h4><p>格式化标记，完成set或者是where标记的功能</p>
<p>1.trim改写where+if语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUserByUsernameAndSex&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ys.po.User&quot;</span>&gt;</span></span><br><span class="line">    select * from user</span><br><span class="line">    <span class="comment">&lt;!-- &lt;where&gt;</span></span><br><span class="line"><span class="comment">        &lt;if test=&quot;username != null&quot;&gt;</span></span><br><span class="line"><span class="comment">           username=#&#123;username&#125;</span></span><br><span class="line"><span class="comment">        &lt;/if&gt;</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">        &lt;if test=&quot;username != null&quot;&gt;</span></span><br><span class="line"><span class="comment">           and sex=#&#123;sex&#125;</span></span><br><span class="line"><span class="comment">        &lt;/if&gt;</span></span><br><span class="line"><span class="comment">    &lt;/where&gt;  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;and | or&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span></span><br><span class="line">           and username=#&#123;username&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span></span><br><span class="line">           and sex=#&#123;sex&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>prefix：前缀</li>
<li>prefixoverride：去掉第一个and或者是or</li>
</ul>
<p>2.trim改写if+set语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 根据 id 更新 user 表的数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.ys.po.User&quot;</span>&gt;</span></span><br><span class="line">    update user u</span><br><span class="line">        <span class="comment">&lt;!-- &lt;set&gt;</span></span><br><span class="line"><span class="comment">            &lt;if test=&quot;username != null and username != &#x27;&#x27;&quot;&gt;</span></span><br><span class="line"><span class="comment">                u.username = #&#123;username&#125;,</span></span><br><span class="line"><span class="comment">            &lt;/if&gt;</span></span><br><span class="line"><span class="comment">            &lt;if test=&quot;sex != null and sex != &#x27;&#x27;&quot;&gt;</span></span><br><span class="line"><span class="comment">                u.sex = #&#123;sex&#125;</span></span><br><span class="line"><span class="comment">            &lt;/if&gt;</span></span><br><span class="line"><span class="comment">        &lt;/set&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;set&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null and username != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                u.username = #&#123;username&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null and sex != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                u.sex = #&#123;sex&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">     where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>suffix：后缀</li>
<li>suffixoverride：去掉最后一个逗号（也可以是其他的标记，就像是上面前缀中的and一样）</li>
</ul>
<p>3.trim+if同时添加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span>&gt;</span></span><br><span class="line">    insert  into student</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;(&quot;</span><span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sname != null&quot;</span>&gt;</span>sname,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spwd != null&quot;</span>&gt;</span>spwd,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span>sex,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span>phone,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;values (&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;)&quot;</span>  <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sname != null&quot;</span>&gt;</span>#&#123;sname&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;spwd != null&quot;</span>&gt;</span>#&#123;spwd&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != null&quot;</span>&gt;</span>#&#123;sex&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span>#&#123;phone&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-foreach"><a href="#6-foreach" class="headerlink" title="6.foreach"></a>6.foreach</h4><p>遍历集合，通常用来处理in语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 批量查询</span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectvp&quot;</span>/&gt;</span> WHERE sid in</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span>  <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;ids&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">// 批量删除</span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;del&quot;</span>  <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">    delete  from  student  where  sid in</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span>  <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">        #&#123;ids&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-sql标签"><a href="#7-sql标签" class="headerlink" title="7.sql标签"></a>7.sql标签</h4><p>抽取相同sql语句,通常结合include使用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 你在外面使用sql标签</span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectvp&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-include"><a href="#8-include" class="headerlink" title="8.include"></a>8.include</h4><p>refid这个属性就是指定<code>&lt;sql&gt;</code>标签中的id值（唯一标识）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findbyid&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectvp&quot;</span>/&gt;</span></span><br><span class="line">    WHERE 1=1</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sid != null&quot;</span>&gt;</span></span><br><span class="line">        AND sid like #&#123;sid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="10-xml交叉引用"><a href="#10-xml交叉引用" class="headerlink" title="10.xml交叉引用"></a>10.xml交叉引用</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// com.xxx.dao.xxMapper对应xml</span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span> ID,MAJOR,BIRTHDAY,AGE,NAME,HOBBY<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// com.xxx.dao.PatinetMapper对应xml引用Base_Column_List要在refid上加上完整路径</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;com.xxx.dao.xxMapper.Base_Column_List&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="二、mybatis-plus"><a href="#二、mybatis-plus" class="headerlink" title="二、mybatis-plus"></a>二、mybatis-plus</h2><p>MyBatis-Plus（简称 MP）是一个基于 MyBatis 的增强工具，它对 Mybatis 的基础功能进行了增强，但未做任何改变。</p>
<p>使得我们可以可以在 Mybatis 开发的项目上直接进行升级为 Mybatis-plus，正如它对自己的定位，它能够帮助我们进一步简化开发过程，提高开发效率。</p>
<p>Mybatis-Plus 其实可以看作是对 Mybatis 的再一次封装，升级之后，对于单表的 CRUD 操作，调用 Mybatis-Plus 所提供的 API 就能够轻松实现，此外还提供了各种查询方式、分页等行为。</p>
<p>最最重要的，开发人员还不用去编写 XML，这就大大降低了开发难度.</p>
<p>mybatis-plus优点</p>
<ul>
<li><strong>无侵入：</strong>只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li><strong>损耗小：</strong>启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作，BaseMapper</li>
<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求，简单的CRUD操作不用自己编写。</li>
<li><strong>支持 Lambda 形式调用：</strong>通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li><strong>支持主键自动生成：</strong>支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li><strong>支持 ActiveRecord 模式：</strong>支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li><strong>支持自定义全局通用操作：</strong>支持全局通用方法注入（ Write once, use anywhere ）</li>
<li><strong>内置代码生成器：</strong>采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用（自动生成代码）</li>
<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li><strong>分页插件支持多种数据库：</strong>支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>
<li><strong>内置性能分析插件：</strong>可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li><strong>内置全局拦截插件：</strong>提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
</ul>
<h3 id="1、mybatis-plus常用注解"><a href="#1、mybatis-plus常用注解" class="headerlink" title="1、mybatis-plus常用注解"></a>1、mybatis-plus常用注解</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42057154/article/details/126624150">https://blog.csdn.net/qq_42057154/article/details/126624150</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/program/293748vse.htm">https://www.jb51.net/program/293748vse.htm</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/davis12/p/17933803.html">https://www.cnblogs.com/davis12/p/17933803.html</a></p>
</blockquote>
<ul>
<li>@Tablename</li>
</ul>
<p>若不指定表名，则以对应的实体类名为表名</p>
<p>多用于entity包下实体类中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给类下的所有属性添加Setter/Getter</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">//给id属性添加Setter</span></span><br><span class="line">    <span class="meta">@Setter</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">//给username的setter方法设置私有权限</span></span><br><span class="line">    <span class="meta">@Setter(AccessLevel.PRIVATE)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">//取消password的Getter方法</span></span><br><span class="line">    <span class="meta">@Getter(AccessLevel.NONE)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对应源码解释</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//源码解释</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE, ElementType.ANNOTATION_TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TableName &#123;</span><br><span class="line">    <span class="comment">//实体对应表名</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	</span><br><span class="line">    String <span class="title function_">schema</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">keepGlobalPrefix</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">resultMap</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">autoResultMap</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="comment">//需要排除的属性名</span></span><br><span class="line">    String[] excludeProperty() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>TableId</li>
</ul>
<p>@TableId(value&#x3D;“数据库主键字段”,type &#x3D; IdType.值)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TableId(value = &quot;id&quot;,type = IdType.AUTO)</span><br><span class="line">private Integer id;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//源码</span><br><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(&#123;ElementType.FIELD, ElementType.ANNOTATION_TYPE&#125;)</span><br><span class="line">public @interface TableId &#123;</span><br><span class="line">    String value() default &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    IdType type() default IdType.NONE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">类型</th>
<th align="left">默认值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">value</td>
<td align="left">string</td>
<td align="left">“”</td>
<td align="left">主键字段名</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">Enum</td>
<td align="left">IdType.NONE</td>
<td align="left">主键类型</td>
</tr>
</tbody></table>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44259233/article/details/122189281">https://blog.csdn.net/weixin_44259233/article/details/122189281</a></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Auto</td>
<td align="left">数据库ID自增</td>
</tr>
<tr>
<td align="left">Input</td>
<td align="left">自行输入</td>
</tr>
<tr>
<td align="left">NONE</td>
<td align="left">无状态</td>
</tr>
<tr>
<td align="left">ASSIGN_UUID</td>
<td align="left">32位UUID字符串</td>
</tr>
<tr>
<td align="left">ASSIGN_ID</td>
<td align="left">雪花算法自动生成主键ID</td>
</tr>
</tbody></table>
<p><strong>雪花算法</strong>（雪花）是微博开源的分布式ID生成算法其核心思想就是：使用一个64位的长型的数字作为全局唯一ID。在分布式系统中的应用十分广泛，且ID引入了时间戳，基本上保持自增的。</p>
<hr>
<p><strong>背景</strong><br>需要选择合适的方案去应对数据规模的增长，以应对逐渐增长的访问压力和数据量。</p>
<p>数据库的扩展方式主要包括：业务分库、主从复制，数据库分表。</p>
<p><strong>数据库分表</strong><br>将不同业务数据分散存储到不同的数据库服务器，能够支撑百万甚至千万用户规模的业务，但如果业务继续发展，同一业务的单表数据也会达到单台数据库服务器的处理瓶颈。例如，淘宝的几亿用户数据，如果全部存放在一台数据库服务器的一张表中，肯定是无法满足性能要求的，此时就需要对单表数据进行拆分。</p>
<p>单表数据拆分有两种方式：垂直分表和水平分表。示意图如下：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="D:\下载\阿里云盘下载\工作\Java面试\mybatis-plus.assets\image-20240625135929290.png" alt="image-20240625135929290"></p>
<p><strong>垂直分表</strong><br>垂直分表适合将表中某些不常用且占了大量空间的列拆分出去。</p>
<p>例如，前面示意图中的 nickname 和 description 字段，假设我们是一个婚恋网站，用户在筛选其他用户的时候，主要是用 age 和 sex 两个字段进行查询，而 nickname 和 description 两个字段主要用于展示，一般不会在业务查询中用到。description 本身又比较长，因此我们可以将这两个字段独立到另外一张表中，这样在查询 age 和 sex 时，就能带来一定的性能提升。</p>
<p><strong>水平分表</strong><br>水平分表适合表行数特别大的表，有的公司要求单表行数超过 5000 万就必须进行分表，这个数字可以作为参考，但并不是绝对标准，关键还是要看表的访问性能。对于一些比较复杂的表，可能超过 1000 万就要分表了；而对于一些简单的表，即使存储数据超过 1 亿行，也可以不分表。</p>
<p>但不管怎样，当看到表的数据量达到千万级别时，作为架构师就要警觉起来，因为这很可能是架构的性能瓶颈或者隐患。</p>
<p>水平分表相比垂直分表，会引入更多的复杂性，例如要求全局唯一的数据id该如何处理。</p>
<p><strong>主键自增</strong></p>
<p>以最常见的用户 ID 为例，可以按照 1000000 的范围大小进行分段，1 ~ 999999 放到表 1中，1000000 ~ 1999999 放到表2中，以此类推。</p>
<p>复杂点：分段大小的选取。分段太小会导致切分后子表数量过多，增加维护复杂度；分段太大可能会导致单表依然存在性能问题，一般建议分段大小在 100 万至 2000 万之间，具体需要根据业务选取合适的分段大小。</p>
<p>优点：可以随着数据的增加平滑地扩充新的表。例如，现在的用户是 100 万，如果增加到 1000 万，只需要增加新的表就可以了，原有的数据不需要动。</p>
<p>缺点：分布不均匀。假如按照 1000 万来进行分表，有可能某个分段实际存储的数据量只有 1 条，而另外一个分段实际存储的数据量有 1000 万条。</p>
<p><strong>取模</strong></p>
<p>同样以用户 ID 为例，假如我们一开始就规划了 10 个数据库表，可以简单地用 user_id % 10 的值来表示数据所属的数据库表编号，ID 为 985 的用户放到编号为 5 的子表中，ID 为 10086 的用户放到编号为 6 的子表中。</p>
<p>复杂点：初始表数量的确定。表数量太多维护比较麻烦，表数量太少又可能导致单表性能存在问题。</p>
<p>优点：表分布比较均匀。</p>
<p>缺点：扩充新的表很麻烦，所有数据都要重分布。</p>
<p><strong>雪花算法</strong><br>雪花算法是由Twitter公布的分布式主键生成算法，它能够保证不同表的主键的不重复性，以及相同表的主键的有序性。</p>
<p><strong>核心思想</strong></p>
<p>长度共64bit（一个long型）。</p>
<p>首先是一个符号位，1bit标识，由于long基本类型在Java中是带符号的，最高位是符号位，正数是0，负数是1，所以id一般是正数，最高位是0。</p>
<p>41bit时间截(毫秒级)，存储的是时间截的差值（当前时间截 - 开始时间截)，结果约等于69.73年。</p>
<p>10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID，可以部署在1024个节点）。</p>
<p>12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID）。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="D:\下载\阿里云盘下载\工作\Java面试\mybatis-plus.assets\image-20240625135908784.png" alt="image-20240625135908784"></p>
<p>优点：整体上按照时间自增排序，并且整个分布式系统内不会产生ID碰撞，并且效率较高。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bangyanya/article/details/134182630">https://blog.csdn.net/bangyanya/article/details/134182630</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42057154/article/details/126624150">https://blog.csdn.net/qq_42057154/article/details/126624150</a></p>
</blockquote>
<hr>
<ul>
<li>@TableField</li>
</ul>
<p>1、主要用来解决实体类的字段名与数据库中的字段名不匹配的问题（数据库user_addr，字段useraddr未驼峰）</p>
<p>2、实体类中的属性字段在表中不存在的问题</p>
<p>3、表示自动填充字段一般用于字段名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@TableName(&quot;tb_user&quot;)</span><br><span class="line">public class User &#123;</span><br><span class="line">    //给id属性添加Setter</span><br><span class="line">    @Setter</span><br><span class="line">    @TableId(value = &quot;id&quot;,type = IdType.AUTO)</span><br><span class="line">    private Integer id;</span><br><span class="line">    //给username的setter方法设置私有权限</span><br><span class="line">    @Setter(AccessLevel.PRIVATE)</span><br><span class="line">    @TableField(value = &quot;username&quot;)</span><br><span class="line">    private String username;</span><br><span class="line">    //取消password的Getter方法</span><br><span class="line">    @Getter(AccessLevel.NONE)</span><br><span class="line">    private String password;</span><br><span class="line">    private static int age;</span><br><span class="line">    private final String address = null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//源码</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.ANNOTATION_TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TableField &#123;</span><br><span class="line">	<span class="comment">//通过设置该值，对应到数据库表的字段名。</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="comment">//主要指明字段在不在数据库表中，如果 false 则不在数据库表中</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">exist</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="comment">//设定值，进而是否开启如模糊查询。</span></span><br><span class="line">    String <span class="title function_">condition</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">update</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    FieldStrategy <span class="title function_">insertStrategy</span><span class="params">()</span> <span class="keyword">default</span> FieldStrategy.DEFAULT;</span><br><span class="line"></span><br><span class="line">    FieldStrategy <span class="title function_">updateStrategy</span><span class="params">()</span> <span class="keyword">default</span> FieldStrategy.DEFAULT;</span><br><span class="line"></span><br><span class="line">    FieldStrategy <span class="title function_">whereStrategy</span><span class="params">()</span> <span class="keyword">default</span> FieldStrategy.DEFAULT;</span><br><span class="line">	<span class="comment">//这里涉及自动填充，在哪些场景中会用到呢，如 插入、更新、更改的时间，我们希望自动填入，其原理其实也是通过设置实体的值，进而达到自动填入的功能。</span></span><br><span class="line">    FieldFill <span class="title function_">fill</span><span class="params">()</span> <span class="keyword">default</span> FieldFill.DEFAULT;</span><br><span class="line">	<span class="comment">//注明查到的字段是否要出现在返回结果中，某些场景中，如 User 表中，可能有 password ，对于这种敏感的字段，是不是可以不用返回呢。</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">select</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">keepGlobalFormat</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">property</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    JdbcType <span class="title function_">jdbcType</span><span class="params">()</span> <span class="keyword">default</span> JdbcType.UNDEFINED;</span><br><span class="line"></span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">TypeHandler</span>&gt; typeHandler() <span class="keyword">default</span> UnknownTypeHandler.class;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">javaType</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">numericScale</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fill解释</p>
<table>
<thead>
<tr>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>DEFAULT</td>
<td>默认不处理</td>
</tr>
<tr>
<td>INSERT</td>
<td>插入时填充字段</td>
</tr>
<tr>
<td>UPDATE</td>
<td>更新时填充字段</td>
</tr>
<tr>
<td>INSERT_UPDATE</td>
<td>插入和更新时填充字段</td>
</tr>
</tbody></table>
<p><strong>如果设置了该 fill 属性，则我们需要去实现或者继承 <code>MetaObjectHandler</code> 接口</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/davis12/p/17933803.html">https://www.cnblogs.com/davis12/p/17933803.html</a></p>
</blockquote>
<ul>
<li>@TableLogic</li>
</ul>
<p><strong>逻辑删除注解</strong>: 一般用于项目中的逻辑删除字段上添加该注解</p>
<p><strong>效果：</strong>在字段上加上这个注解再执行BaseMapper的删除方法时，删除方法会变成修改</p>
<p><strong>执行是效果：</strong>　　　　　　</p>
<ul>
<li>加@TableLogic的情况下　　　　</li>
<li>sql：UPDATE 表名 SET deleted&#x3D;2 WHERE id&#x3D;? AND deleted&#x3D;0　　　　　  </li>
<li>不加@TableLogic的情况下　　　　　　</li>
<li>走 delete from 表名 where id&#x3D;值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//value = &quot;&quot; 默认的原值　　　　</span></span><br><span class="line"><span class="comment">//delval = &quot;&quot; 删除后的值　　　　</span></span><br><span class="line"><span class="comment">//@TableLogic(value=&quot;原值&quot;,delval=&quot;改值&quot;)</span></span><br><span class="line"><span class="meta">@TableLogic(value = &quot;0&quot;, delval = &quot;1&quot;)</span> </span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<ul>
<li>@EnumValue</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">GenderEnum</span> &#123;</span><br><span class="line">    MALE(<span class="string">&quot;男&quot;</span>),</span><br><span class="line">    FEMALE(<span class="string">&quot;女&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span></span><br><span class="line">    <span class="meta">@JsonValue</span></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    GenderEnum(String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TableField(&quot;gender&quot;)</span><br><span class="line">private GenderEnum gender;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/gli_001/article/details/126877012">https://blog.csdn.net/gli_001/article/details/126877012</a></p>
</blockquote>
<h3 id="2、mybatis-plus-crud"><a href="#2、mybatis-plus-crud" class="headerlink" title="2、mybatis-plus crud"></a>2、mybatis-plus crud</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_47872288/article/details/135305933">https://blog.csdn.net/weixin_47872288/article/details/135305933</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_74383330/article/details/135251245">https://blog.csdn.net/weixin_74383330/article/details/135251245</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/program/302756bp6.htm">https://www.jb51.net/program/302756bp6.htm</a></p>
</blockquote>
<p><strong>mybatis-plus增删改查</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.example.demo1.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.demo1.model.eneity.GenderEnum;</span><br><span class="line"><span class="keyword">import</span> com.example.demo1.model.eneity.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 新增一条记录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line"><span class="comment">//        user.setId(1);</span></span><br><span class="line">        user.setUsername(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">18</span>);</span><br><span class="line">        user.setAddress(<span class="string">&quot;sssss&quot;</span>);</span><br><span class="line">        user.setGender(GenderEnum.FEMALE);</span><br><span class="line">        userMapper.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 根据id删除一条记录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTest1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">deleteById</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">5</span>);</span><br><span class="line">        System.out.println(deleteById);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 根据id删除多条记录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTest2</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; idList = Arrays.asList(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">deleteByIds</span> <span class="operator">=</span> userMapper.deleteBatchIds(idList);</span><br><span class="line">        <span class="comment">//删除了多少行</span></span><br><span class="line">        System.out.println(deleteByIds);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 删除map字段值,注意此处的Map类型是&lt;String,Object&gt;，而不是自身两个属性的值</span></span><br><span class="line"><span class="comment">     * ？？？</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTest3</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String,Object&gt; map =<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;map_username&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;map_password&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">delete3</span> <span class="operator">=</span> userMapper.deleteByMap(map);</span><br><span class="line">        <span class="comment">// 删除了多少行</span></span><br><span class="line">        System.out.println(delete3);</span><br><span class="line"></span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;ceshi&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">delete4</span> <span class="operator">=</span> userMapper.delete(wrapper);</span><br><span class="line">        <span class="comment">// 删除了多少行</span></span><br><span class="line">        System.out.println(delete4);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 更新表中指定字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1</span>);</span><br><span class="line">        user.setUsername(<span class="string">&quot;saZki1&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;pass1&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">        System.out.println(update);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 批量更新表中指定字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456789&quot;</span>);</span><br><span class="line">        <span class="type">QueryWrapper</span> <span class="variable">wrapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        <span class="comment">// 此处可以通过like，对搜出来的大部分进行批量修改！</span></span><br><span class="line">        <span class="comment">//wrapper.like(&quot;address&quot;,&quot;江苏省宿迁市&quot;);</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;saZki&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">update</span> <span class="operator">=</span> userMapper.update(user,wrapper);</span><br><span class="line">        <span class="comment">//修改记录条数</span></span><br><span class="line">        System.out.println(update);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 根据id查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectTest1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 根据id查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectTest2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().eq(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;saZki&quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">//queryWrapper查询</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="comment">//另外一种方式，根据 LambdaQueryWrapper 的条件查询</span></span><br><span class="line"><span class="comment">//        User user1 = userMapper.selectOne(</span></span><br><span class="line"><span class="comment">//                new LambdaQueryWrapper&lt;User&gt;().like(User::getUsername,&quot;saZki&quot;)</span></span><br><span class="line"><span class="comment">//        );</span></span><br><span class="line"><span class="comment">//        System.out.println(user1);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 根据id批量查询</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectTest3</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>);</span><br><span class="line">        List&lt;User&gt; users = userMapper.selectBatchIds(list);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line"><span class="comment">//        for (User user : users) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(user);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 通过map条件查找</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectTest4</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;saZki&quot;</span>);</span><br><span class="line">        List&lt;User&gt; users  = userMapper.selectByMap(map);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 查询全部记录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">selectTest5</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(users);</span><br><span class="line"><span class="comment">//        users.forEach(System.out::println);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a>条件构造器</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zoroly/article/details/131507643">https://blog.csdn.net/zoroly/article/details/131507643</a></p>
</blockquote>
<p>MyBatis-Plus 通过 EntityWrapper（简称 EW，MP 封装的一个查询条件构造器）或者 Condition（与 EW 类似） 来让用户自由的构建查询条件，简单便捷，没有额外的负担， 能够有效提高开发效率，它主要用于处理 sql 拼接，排序，实体参数查询等。</p>
<p>注意：使用的是数据库字段，不是 Java 属性！</p>
<p>警告：MyBatis-Plus不支持以及不赞成在 RPC 调用中把 Wrapper 进行传输，Wrapper 很重，传输 Wrapper 可以类比为你的 controller 用 map 接收值(开发一时爽，维护火葬场)，正确的 RPC 调用姿势是写一个 DTO 进行传输，被调用方再根据 DTO 执行相应的操作。</p>
<h5 id="1、Wrapper介绍"><a href="#1、Wrapper介绍" class="headerlink" title="1、Wrapper介绍"></a>1、Wrapper介绍</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img-blog.csdnimg.cn/img_convert/eb78865fb3f70a91ab63cf7517f6deca.png" alt="image-20220521092812125"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Wrapper ： 条件构造抽象类，最顶端父类</span><br><span class="line">AbstractWrapper ： 用于查询条件封装，生成 sql 的 where 条件</span><br><span class="line"></span><br><span class="line">QueryWrapper ： 查询条件封装</span><br><span class="line"></span><br><span class="line">UpdateWrapper ： Update 条件封装</span><br><span class="line"></span><br><span class="line">AbstractLambdaWrapper ： 使用Lambda 语法</span><br><span class="line"></span><br><span class="line">LambdaQueryWrapper ：用于Lambda语法使用的查询Wrapper</span><br><span class="line"></span><br><span class="line">LambdaUpdateWrapper ： Lambda 更新封装Wrapper</span><br></pre></td></tr></table></figure>

<h5 id="2、QueryWrapper"><a href="#2、QueryWrapper" class="headerlink" title="2、QueryWrapper"></a>2、QueryWrapper</h5><ul>
<li>组装查询条件</li>
</ul>
<p><strong>执行SQL：</strong>SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void test01()&#123;</span><br><span class="line">    //查询用户名包含a，年龄在20到30之间，邮箱信息不为null的用户信息</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.like(&quot;username&quot;,&quot;a&quot;).between(&quot;age&quot;,20,30).isNotNull(&quot;email&quot;);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组装排序条件</li>
</ul>
<p><strong>执行SQL：</strong>SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 ORDER BY age DESC,id ASC</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void test02()&#123;</span><br><span class="line">    //查询用户信息，按照年龄的降序排序，若年龄相同，则按照id升序排序</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.orderByDesc(&quot;age&quot;).orderByAsc(&quot;id&quot;);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组装删除条件</li>
</ul>
<p><strong>执行SQL：</strong>UPDATE t_user SET is_deleted&#x3D;1 WHERE is_deleted&#x3D;0 AND (email IS NULL)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public void test03()&#123;</span><br><span class="line">    //删除邮箱地址为null的用户信息</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.isNull(&quot;email&quot;);</span><br><span class="line">    int result = userMapper.delete(queryWrapper);</span><br><span class="line">    System.out.println(result &gt; 0 ? &quot;删除成功！&quot; : &quot;删除失败！&quot;);</span><br><span class="line">    System.out.println(&quot;受影响的行数为：&quot; + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>条件的优先级</li>
</ul>
<p><strong>执行SQL：</strong>UPDATE t_user SET user_name&#x3D;?, email&#x3D;? WHERE is_deleted&#x3D;0 AND (age &gt; ? AND user_name LIKE ? OR email IS NULL)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public void test04()&#123;</span><br><span class="line">    //将（年龄大于20并且用户名中包含有a）或邮箱为null的用户信息修改</span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = new UpdateWrapper&lt;&gt;();</span><br><span class="line">    updateWrapper.gt(&quot;age&quot;,20).like(&quot;username&quot;,&quot;a&quot;).or().isNull(&quot;email&quot;);</span><br><span class="line">    User user = new User();</span><br><span class="line">    user.setName(&quot;Oz&quot;);</span><br><span class="line">    user.setEmail(&quot;test@oz6.com&quot;);</span><br><span class="line"></span><br><span class="line">    int result = userMapper.update(user, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; 0 ? &quot;修改成功！&quot; : &quot;修改失败！&quot;);</span><br><span class="line">    System.out.println(&quot;受影响的行数为：&quot; + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>执行SQL：</strong>UPDATE t_user SET username&#x3D;?, email&#x3D;? WHERE is_deleted&#x3D;0 AND (username LIKE ? AND (age &gt; ? OR email IS NULL))</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public void test05()&#123;</span><br><span class="line">    //将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = new UpdateWrapper&lt;&gt;();</span><br><span class="line">    updateWrapper.like(&quot;username&quot;,&quot;a&quot;).and(i-&gt;i.gt(&quot;age&quot;,20).or().isNull(&quot;email&quot;));</span><br><span class="line">    User user = new User();</span><br><span class="line">    user.setName(&quot;Vz7797&quot;);</span><br><span class="line">    user.setEmail(&quot;test@ss8o.com&quot;);</span><br><span class="line"></span><br><span class="line">    int result = userMapper.update(user, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; 0 ? &quot;修改成功！&quot; : &quot;修改失败！&quot;);</span><br><span class="line">    System.out.println(&quot;受影响的行数为：&quot; + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>组装select子句</li>
</ul>
<p><strong>执行SQL：</strong>SELECT username,age,email FROM t_user WHERE is_deleted&#x3D;0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void test06()&#123;</span><br><span class="line">    //查询用户的用户名、年龄、邮箱信息</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.select(&quot;username&quot;,&quot;age&quot;,&quot;email&quot;);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>实现子查询</li>
</ul>
<p><strong>执行SQL：</strong>SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 AND (uid IN (select uid from t_user where uid &lt;&#x3D; 100))</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void test07()&#123;</span><br><span class="line">    //查询id小于等于100的用户信息</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.inSql(&quot;uid&quot;, &quot;select uid from t_user where uid &lt;= 100&quot;);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-UpdateWrapper"><a href="#3-UpdateWrapper" class="headerlink" title="3.UpdateWrapper"></a>3.UpdateWrapper</h5><p>UpdateWrapper不仅拥有QueryWrapper的组装条件功能，还提供了set方法进行修改对应条件的数据库信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public void test08()&#123;</span><br><span class="line">    //将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = new UpdateWrapper&lt;&gt;();</span><br><span class="line">    updateWrapper.like(&quot;username&quot;,&quot;a&quot;).and( i -&gt; i.gt(&quot;age&quot;,20).or().isNull(&quot;email&quot;)).set(&quot;email&quot;,&quot;svip@qq.com&quot;);</span><br><span class="line">    int result = userMapper.update(null, updateWrapper);</span><br><span class="line">    System.out.println(result &gt; 0 ? &quot;修改成功！&quot; : &quot;修改失败！&quot;);</span><br><span class="line">    System.out.println(&quot;受影响的行数为：&quot; + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-condition"><a href="#4-condition" class="headerlink" title="4.condition"></a>4.condition</h5><p>在真正开发的过程中，组装条件是常见的功能，而这些条件数据来源于用户输入，是可选的，因此我们在组装这些条件时，必须先判断用户是否选择了这些条件，若选择则需要组装该条件，若没有选择则一定不能组装，以免影响SQL执行的结果</p>
<p>思路一</p>
<p><strong>执行SQL：</strong>SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted&#x3D;0 AND (user_name LIKE ? AND age &lt;&#x3D; ?)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void test09()&#123;</span><br><span class="line">    String username = &quot;a&quot;;</span><br><span class="line">    Integer ageBegin = null;</span><br><span class="line">    Integer ageEnd = 30;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    if(StringUtils.isNotBlank(username))&#123;</span><br><span class="line">        //isNotBlank判断某个字符创是否不为空字符串、不为null、不为空白符</span><br><span class="line">        queryWrapper.like(&quot;user_name&quot;, username);</span><br><span class="line">    &#125;</span><br><span class="line">    if(ageBegin != null)&#123;</span><br><span class="line">        queryWrapper.ge(&quot;age&quot;, ageBegin);</span><br><span class="line">    &#125;</span><br><span class="line">    if(ageEnd != null)&#123;</span><br><span class="line">        queryWrapper.le(&quot;age&quot;, ageEnd);</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>思路二</p>
<p>上面的实现方案没有问题，但是代码比较复杂，我们可以使用带condition参数的重载方法构建查询条件，简化代码的编写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public void test10()&#123;</span><br><span class="line">    String username = &quot;a&quot;;</span><br><span class="line">    Integer ageBegin = null;</span><br><span class="line">    Integer ageEnd = 30;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), &quot;user_name&quot;, username)</span><br><span class="line">        .ge(ageBegin != null, &quot;age&quot;, ageBegin)</span><br><span class="line">        .le(ageEnd != null, &quot;age&quot;, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="5-LambdaQueryWrapper"><a href="#5-LambdaQueryWrapper" class="headerlink" title="5.LambdaQueryWrapper"></a>5.LambdaQueryWrapper</h5><p>功能等同于QueryWrapper，提供了Lambda表达式的语法可以避免填错列名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public void test11()&#123;</span><br><span class="line">    String username = &quot;a&quot;;</span><br><span class="line">    Integer ageBegin = null;</span><br><span class="line">    Integer ageEnd = 30;</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; queryWrapper = new LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.like(StringUtils.isNotBlank(username), User::getName, username)</span><br><span class="line">        .ge(ageBegin != null, User::getAge, ageBegin)</span><br><span class="line">        .le(ageEnd != null, User::getAge, ageEnd);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="6-LambdaUpdateWrapper"><a href="#6-LambdaUpdateWrapper" class="headerlink" title="6.LambdaUpdateWrapper"></a>6.LambdaUpdateWrapper</h5><p>功能等同于UpdateWrapper，提供了Lambda表达式的语法可以避免填错列名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public void test12()&#123;</span><br><span class="line">    //将用户名中包含有a并且（年龄大于20或邮箱为null）的用户信息修改</span><br><span class="line">    LambdaUpdateWrapper&lt;User&gt; updateWrapper = new LambdaUpdateWrapper&lt;&gt;();</span><br><span class="line">    updateWrapper.like(User::getName, &quot;a&quot;)</span><br><span class="line">        .and(i -&gt; i.gt(User::getAge, 20).or().isNull(User::getEmail));</span><br><span class="line">    updateWrapper.set(User::getName, &quot;小黑&quot;).set(User::getEmail,&quot;abc@atguigu.com&quot;);</span><br><span class="line">    int result = userMapper.update(null, updateWrapper);</span><br><span class="line">    System.out.println(&quot;result：&quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7-构造器的使用"><a href="#7-构造器的使用" class="headerlink" title="7.构造器的使用"></a>7.构造器的使用</h5><p>7.1 allEq</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">allEq(Map&lt;R, V&gt; params)</span><br><span class="line">allEq(Map&lt;R, V&gt; params, boolean null2IsNull)</span><br><span class="line">allEq(boolean condition, Map&lt;R, V&gt; params, boolean null2IsNull)</span><br></pre></td></tr></table></figure>

<p>全部 eq (或个别 isNull）<br>个别参数说明：</p>
<p>params：key为数据库字段名，value为字段值<br>null2IsNull：为true则在map的value为null时调用 isNull方法，为false时则忽略value为null的</p>
<p>例1: allEq({id:1,name:”老王”,age:null})—&gt;id &#x3D; 1 and name &#x3D; ‘老王’ and age is null<br>例2: allEq({id:1,name:”老王”,age:null}, false)—&gt;id &#x3D; 1 and name &#x3D; ‘老王’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params)</span><br><span class="line">allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, boolean null2IsNull)</span><br><span class="line">allEq(boolean condition, BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params, boolean null2IsNull) </span><br><span class="line">个别参数说明：</span><br></pre></td></tr></table></figure>

<p>filter : 过滤函数，是否允许字段传入比对条件中<br>params 与 null2IsNull : 同上</p>
<p>例1: allEq((k,v) -&gt; k.indexOf(“a”) &gt;&#x3D; 0, {id:1,name:“老王”,age:null})—&gt;name &#x3D; ‘老王’ and age is null<br>例2: allEq((k,v) -&gt; k.indexOf(“a”) &gt;&#x3D; 0, {id:1,name:“老王”,age:null}, false)—&gt;name &#x3D; ‘老王’</p>
<p>7.2 eq</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eq(R column, Object val)</span><br><span class="line">eq(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>等于 &#x3D;<br>例: eq(“name”, “老王”)—&gt;name &#x3D; ‘老王’<br>7.3 ne</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ne(R column, Object val)</span><br><span class="line">ne(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>不等于 &lt;&gt;<br>例: ne(“name”, “老王”)—&gt;name &lt;&gt; ‘老王’<br>7.4 gt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gt(R column, Object val)</span><br><span class="line">gt(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>大于 &gt;<br>例: gt(“age”, 18)—&gt;age &gt; 18<br>7.5 ge</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ge(R column, Object val)</span><br><span class="line">ge(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>大于等于 &gt;&#x3D;<br>例: ge(“age”, 18)—&gt;age &gt;&#x3D; 18<br>7.6 lt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lt(R column, Object val)</span><br><span class="line">lt(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>小于 &lt;<br>例: lt(“age”, 18)—&gt;age &lt; 18<br>7.7 le</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">le(R column, Object val)</span><br><span class="line">le(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>小于等于 &lt;&#x3D;<br>例: le(“age”, 18)—&gt;age &lt;&#x3D; 18<br>7.8 between</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">between(R column, Object val1, Object val2)</span><br><span class="line">between(boolean condition, R column, Object val1, Object val2)</span><br></pre></td></tr></table></figure>

<p>BETWEEN 值1 AND 值2<br>例: between(“age”, 18, 30)—&gt;age between 18 and 30<br>7.9 notBetween</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notBetween(R column, Object val1, Object val2)</span><br><span class="line">notBetween(boolean condition, R column, Object val1, Object val2)</span><br></pre></td></tr></table></figure>

<p>NOT BETWEEN 值1 AND 值2<br>例: notBetween(“age”, 18, 30)—&gt;age not between 18 and 30<br>7.10 like</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">like(R column, Object val)</span><br><span class="line">like(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>LIKE ‘%值%’<br>例: like(“name”, “王”)—&gt;name like ‘%王%’<br>7.11 notLike</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notLike(R column, Object val)</span><br><span class="line">notLike(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>NOT LIKE ‘%值%’<br>例: notLike(“name”, “王”)—&gt;name not like ‘%王%’<br>7.12 likeLeft</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">likeLeft(R column, Object val)</span><br><span class="line">likeLeft(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>LIKE ‘%值’<br>例: likeLeft(“name”, “王”)—&gt;name like ‘%王’<br>7.13 likeRight</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">likeRight(R column, Object val)</span><br><span class="line">likeRight(boolean condition, R column, Object val)</span><br></pre></td></tr></table></figure>

<p>LIKE ‘值%’<br>例: likeRight(“name”, “王”)—&gt;name like ‘王%’<br>7.14 isNull</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">isNull(R column)</span><br><span class="line">isNull(boolean condition, R column)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>字段 IS NULL<br>例: isNull(“name”)—&gt;name is null<br>7.15 isNotNull</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isNotNull(R column)</span><br><span class="line">isNotNull(boolean condition, R column)</span><br></pre></td></tr></table></figure>

<p>字段 IS NOT NULL<br>例: isNotNull(“name”)—&gt;name is not null<br>7.16 in</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">in(R column, Collection&lt;?&gt; value)</span><br><span class="line">in(boolean condition, R column, Collection&lt;?&gt; value)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>字段 IN (value.get(0), value.get(1), …)<br>例: in(“age”,{1,2,3})—&gt;age in (1,2,3)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">in(R column, Object... values)</span><br><span class="line">in(boolean condition, R column, Object... values)</span><br></pre></td></tr></table></figure>

<p>字段 IN (v0, v1, …)<br>例: in(“age”, 1, 2, 3)—&gt;age in (1,2,3)<br>7.17 notIn</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notIn(R column, Collection&lt;?&gt; value)</span><br><span class="line">notIn(boolean condition, R column, Collection&lt;?&gt; value)</span><br></pre></td></tr></table></figure>

<p>字段 NOT IN (value.get(0), value.get(1), …)<br>例: notIn(“age”,{1,2,3})—&gt;age not in (1,2,3)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notIn(R column, Object... values)</span><br><span class="line">notIn(boolean condition, R column, Object... values)</span><br></pre></td></tr></table></figure>

<p>字段 NOT IN (v0, v1, …)<br>例: notIn(“age”, 1, 2, 3)—&gt;age not in (1,2,3)<br>7.18 inSql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inSql(R column, String inValue)</span><br><span class="line">inSql(boolean condition, R column, String inValue)</span><br></pre></td></tr></table></figure>


<p>字段 IN ( sql语句 )<br>例: inSql(“age”, “1,2,3,4,5,6”)—&gt;age in (1,2,3,4,5,6)<br>例: inSql(“id”, “select id from table where id &lt; 3”)—&gt;id in (select id from table where id &lt; 3)</p>
<p>7.19 notInSql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">notInSql(R column, String inValue)</span><br><span class="line">notInSql(boolean condition, R column, String inValue)</span><br></pre></td></tr></table></figure>


<p>字段 NOT IN ( sql语句 )<br>例: notInSql(“age”, “1,2,3,4,5,6”)—&gt;age not in (1,2,3,4,5,6)<br>例: notInSql(“id”, “select id from table where id &lt; 3”)—&gt;id not in (select id from table where id &lt; 3)</p>
<p>7.20 groupBy</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupBy(R... columns)</span><br><span class="line">groupBy(boolean condition, R... columns)</span><br></pre></td></tr></table></figure>

<p>分组：GROUP BY 字段, …<br>例: groupBy(“id”, “name”)—&gt;group by id,name<br>7.21 orderByAsc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">orderByAsc(R... columns)</span><br><span class="line">orderByAsc(boolean condition, R... columns)</span><br></pre></td></tr></table></figure>

<p>排序：ORDER BY 字段, … ASC<br>例: orderByAsc(“id”, “name”)—&gt;order by id ASC,name ASC<br>7.22 orderByDesc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">orderByDesc(R... columns)</span><br><span class="line">orderByDesc(boolean condition, R... columns)</span><br></pre></td></tr></table></figure>

<p>排序：ORDER BY 字段, … DESC<br>例: orderByDesc(“id”, “name”)—&gt;order by id DESC,name DESC<br>7.23 orderBy</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">orderBy(boolean condition, boolean isAsc, R... columns)</span><br></pre></td></tr></table></figure>

<p>排序：ORDER BY 字段, …<br>例: orderBy(true, true, “id”, “name”)—&gt;order by id ASC,name ASC<br>7.24 having</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">having(String sqlHaving, Object... params)</span><br><span class="line">having(boolean condition, String sqlHaving, Object... params)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>HAVING ( sql语句 )<br>例: having(“sum(age) &gt; 10”)—&gt;having sum(age) &gt; 10<br>例: having(“sum(age) &gt; {0}”, 11)—&gt;having sum(age) &gt; 11<br>7.25 func</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func(Consumer&lt;Children&gt; consumer)</span><br><span class="line">func(boolean condition, Consumer&lt;Children&gt; consumer)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>func 方法(主要方便在出现if…else下调用不同方法能不断链)<br>例: func(i -&gt; if(true) {i.eq(“id”, 1)} else {i.ne(“id”, 1)})<br>7.26 or</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">or()</span><br><span class="line">or(boolean condition)</span><br></pre></td></tr></table></figure>

<p>拼接 OR<br>注意事项:</p>
<p>主动调用or表示紧接着下一个方法不是用and连接!(不调用or则默认为使用and连接)</p>
<p>例: eq(“id”,1).or().eq(“name”,”老王”)—&gt;id &#x3D; 1 or name &#x3D; ‘老王’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">or(Consumer&lt;Param&gt; consumer)</span><br><span class="line">or(boolean condition, Consumer&lt;Param&gt; consumer)</span><br></pre></td></tr></table></figure>

<p>OR 嵌套<br>例: or(i -&gt; i.eq(“name”, “李白”).ne(“status”, “活着”))—&gt;or (name &#x3D; ‘李白’ and status &lt;&gt; ‘活着’)<br>7.27 and</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and(Consumer&lt;Param&gt; consumer)</span><br><span class="line">and(boolean condition, Consumer&lt;Param&gt; consumer)</span><br></pre></td></tr></table></figure>

<p>AND 嵌套<br>例: and(i -&gt; i.eq(“name”, “李白”).ne(“status”, “活着”))—&gt;and (name &#x3D; ‘李白’ and status &lt;&gt; ‘活着’)<br>7.28 nested</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nested(Consumer&lt;Param&gt; consumer)</span><br><span class="line">nested(boolean condition, Consumer&lt;Param&gt; consumer)</span><br></pre></td></tr></table></figure>

<p>正常嵌套 不带 AND 或者 OR<br>例: nested(i -&gt; i.eq(“name”, “李白”).ne(“status”, “活着”))—&gt;(name &#x3D; ‘李白’ and status &lt;&gt; ‘活着’)<br>7.29 apply</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apply(String applySql, Object... params)</span><br><span class="line">apply(boolean condition, String applySql, Object... params)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>拼接 sql<br>注意事项:</p>
<p>该方法可用于数据库函数动态入参的params对应前面applySql内部的{index}部分，这样是不会有sql注入风险的，反之会有!</p>
<p>例: apply(“id &#x3D; 1”)—&gt;id &#x3D; 1<br>例: apply(“date_format(dateColumn,‘%Y-%m-%d’) &#x3D; ‘2008-08-08’”)—&gt;date_format(dateColumn,‘%Y-%m-%d’) &#x3D; ‘2008-08-08’“)<br>例: apply(“date_format(dateColumn,‘%Y-%m-%d’) &#x3D; {0}”, “2008-08-08”)—&gt;date_format(dateColumn,‘%Y-%m-%d’) &#x3D; ‘2008-08-08’”)</p>
<p>7.30 last</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">last(String lastSql)</span><br><span class="line">last(boolean condition, String lastSql)</span><br></pre></td></tr></table></figure>

<p>无视优化规则直接拼接到 sql 的最后<br>注意事项:</p>
<p>只能调用一次，多次调用以最后一次为准，有sql注入的风险，请谨慎使用</p>
<p>例: last(“limit 1”)<br>7.31 exists</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exists(String existsSql)</span><br><span class="line">exists(boolean condition, String existsSql)</span><br></pre></td></tr></table></figure>

<p>拼接 EXISTS ( sql语句 )<br>例: exists(“select id from table where age &#x3D; 1”)—&gt;exists (select id from table where age &#x3D; 1)<br>7.32 notExists<br>notExists(String notExistsSql)<br>notExists(boolean condition, String notExistsSql)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">拼接 NOT EXISTS ( sql语句 )</span><br><span class="line">例: notExists(&quot;select id from table where age = 1&quot;)—&gt;not exists (select id from table where age = 1)</span><br></pre></td></tr></table></figure>





<h3 id="3、mybatis-plus常用插件"><a href="#3、mybatis-plus常用插件" class="headerlink" title="3、mybatis-plus常用插件"></a>3、mybatis-plus常用插件</h3><p>1、分页插件</p>
<p>添加配置类**<code>MyBatisPlusConfig</code>**</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span><br><span class="line">public class MyBatisPlusConfig &#123;</span><br><span class="line">    @Bean</span><br><span class="line">    public MybatisPlusInterceptor mybatisPlusInterceptor()&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();</span><br><span class="line">        /*</span><br><span class="line">        添加分页插件</span><br><span class="line">        MybatisPlusInterceptor是一个处理分页查询的拦截器，他的作用是在执行数据库查询之前，根据分页参数对查询进行修改，以返回正确的结果</span><br><span class="line">        DbType.MYSQL是一个枚举值，表示要使用的数据库类型为MySQL。这告诉拦截器要针对MySQL数据库进行分页查询的优化。</span><br><span class="line">       */</span><br><span class="line">        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">        return interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testPage()&#123;</span><br><span class="line">    //new Page()中的两个参数分别是当前页码，每页显示数量</span><br><span class="line">    Page&lt;User&gt; page = userMapper.selectPage(new Page&lt;&gt;(1, 2), null);</span><br><span class="line">    List&lt;User&gt; users = page.getRecords();</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、自定义分页</p>
<p><strong>在<code>UserMapper</code>接口中定义一个方法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * 根据年龄查询用户列表，分页显示 </span><br><span class="line">  * @param page 分页对象,xml中可以从里面进行取值,传递参数 Page 即自动分页,必须放在第一位 </span><br><span class="line">  * @param age 年龄 </span><br><span class="line">  * @return </span><br><span class="line">  */</span><br><span class="line">Page&lt;User&gt; selectPageVo(@Param(&quot;page&quot;) Page&lt;User&gt; page,@Param(&quot;age&quot;) Integer age);</span><br></pre></td></tr></table></figure>

<p><strong>在<code>UserMapper.xml</code>中编写SQL实现该方法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;selectPageVo&quot; resultType=&quot;User&quot;&gt;</span><br><span class="line">    select id,username as name,age,email from t_user where age &gt; #&#123;age&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>测试方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testPageVo()&#123;</span><br><span class="line">    Page&lt;User&gt; page = userMapper.selectPageVo(new Page&lt;User&gt;(1,2), 20);</span><br><span class="line">    List&lt;User&gt; users = page.getRecords();</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、乐观锁和悲观锁</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44606481/article/details/138953806">https://blog.csdn.net/weixin_44606481/article/details/138953806</a></p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zoroly/article/details/131507643">https://blog.csdn.net/zoroly/article/details/131507643</a></p>
</blockquote>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>1、自定义SQL</p>
<blockquote>
<p>几种自定义sql方式<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_20957669/article/details/130396077">https://blog.csdn.net/qq_20957669/article/details/130396077</a></p>
</blockquote>
<p>wrapper+xml文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:\Users\saZki\AppData\Roaming\Typora\typora-user-images\image-20240729150738628.png" alt="image-20240729150738628"></p>
<blockquote>
<p>mybatis中的#和$</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yangyou55/article/details/80548116/">https://blog.csdn.net/yangyou55/article/details/80548116/</a></p>
</blockquote>
<p>#相当于对数据 加上 双引号，$相当于直接显示数据</p>
<ol>
<li><p>#将传入的数据都当成一个字符串，会对自动传入的数据加一个双引号。如：order by #user_id#，如果传入的值是111,那么解析成sql时的值为order by “111”, 如果传入的值是id，则解析成的sql为order by “id”.</p>
</li>
<li><p>$将传入的数据直接显示生成在sql中。如：order by $user_id$，如果传入的值是111,那么解析成sql时的值为order by user_id, 如果传入的值是id，则解析成的sql为order by id.</p>
</li>
</ol>
</blockquote>
<p>2、Service接口</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic1.zhimg.com/v2-65f176e67a98cd620942f586614b22ec_r.jpg" alt="img"></p>
<p>3.#{}和${}符号的意义和区别</p>
<p>#{}</p>
<blockquote>
<p>1.MyBatis处理 #{ } 占位符，使用的 JDBC 对象是 PreparedStatement 对象，执行sql语句的<strong>效率更高</strong>。<br>2.使用 PreparedStatement 对象，能够避免 sql 注入，使得sql语句的执行更加安全。<br>3.#{ } 常常作为<strong>列值</strong>使用，位于sql语句中等号的右侧；#{ } 位置的值与<strong>数据类型是相关</strong>的。</p>
</blockquote>
<p>${}</p>
<blockquote>
<p>1.MyBatis处理 ${ } 占位符，使用的 JDBC 对象是 Statement 对象，执行sql语句的<strong>效率相对</strong>于 #{ } 占位符<strong>要更低</strong>。<br>2.${ } 占位符的值，使用的是字符串连接的方式，有 sql 注入的风险，同时也存在代码安全的问题。<br>3.${ } 占位符中的数据是<strong>原模原样</strong>的，<strong>不会区分数据类型</strong>。<br>4.${ } 占位符常用作<strong>表名</strong>或<strong>列名</strong>，这里推荐在能保证数据安全的情况下使用 ${ }。</p>
</blockquote>
<p>什么是不区分数据类型</p>
<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Student&gt; students=studentDao.queryStudent(&quot;张起灵&quot;);</span><br></pre></td></tr></table></figure>

<p>转换成对应sql代码<code>select * from student where name=张起灵</code></p>
<p>查找的字段本应该为varchar类型需要添加&#96;&#96;</p>
<p>即</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Student&gt; students=studentDao.queryStudent(&quot;&#x27;张起灵&#x27;&quot;);</span><br></pre></td></tr></table></figure>

<p>此时对应sql代码<code>select * from student where name=&#39;张起灵&#39;</code></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">sazkii</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/06/27/mybatis-plus/">http://example.com/2024/06/27/mybatis-plus/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">sazkii</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring-Boot/">Spring Boot</a></div><div class="post_share"><div class="social-share" data-image="https://avatars.githubusercontent.com/u/74520977?s…00&amp;u=060925dc0ee8e853e7c8dee426bd0ca3e9850dc2&amp;v=4" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/06/27/lombok/" title="Lombok"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Lombok</div></div></a></div><div class="next-post pull-right"><a href="/2024/06/27/restful/" title="restful"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">restful</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/06/27/lombok/" title="Lombok"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-27</div><div class="title">Lombok</div></div></a></div><div><a href="/2024/06/27/restful/" title="restful"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-27</div><div class="title">restful</div></div></a></div><div><a href="/2024/06/27/springboot/" title="Spring Boot"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-27</div><div class="title">Spring Boot</div></div></a></div><div><a href="/2024/06/27/sql/" title="SQL"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-27</div><div class="title">SQL</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/74520977?s…00&amp;u=060925dc0ee8e853e7c8dee426bd0ca3e9850dc2&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">sazkii</div><div class="author-info__description">Hexo+github</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/sazkii"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/sazkii" target="_blank" title=""><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">无限进步</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mybatis-mybatis-plus"><span class="toc-number">1.</span> <span class="toc-text">mybatis&#x2F;mybatis-plus</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81mybatis"><span class="toc-number">1.1.</span> <span class="toc-text">一、mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81sql"><span class="toc-number">1.1.1.</span> <span class="toc-text">动态sql</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-if"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">1.if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-where"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">2.where</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-set"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">3.set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-choose"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">4.choose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-trim%E6%A0%87%E8%AE%B0"><span class="toc-number">1.1.1.5.</span> <span class="toc-text">5.trim标记</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-foreach"><span class="toc-number">1.1.1.6.</span> <span class="toc-text">6.foreach</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-sql%E6%A0%87%E7%AD%BE"><span class="toc-number">1.1.1.7.</span> <span class="toc-text">7.sql标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-include"><span class="toc-number">1.1.1.8.</span> <span class="toc-text">8.include</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-xml%E4%BA%A4%E5%8F%89%E5%BC%95%E7%94%A8"><span class="toc-number">1.1.1.9.</span> <span class="toc-text">10.xml交叉引用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81mybatis-plus"><span class="toc-number">1.2.</span> <span class="toc-text">二、mybatis-plus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81mybatis-plus%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.2.1.</span> <span class="toc-text">1、mybatis-plus常用注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81mybatis-plus-crud"><span class="toc-number">1.2.2.</span> <span class="toc-text">2、mybatis-plus crud</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">条件构造器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81Wrapper%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.2.1.1.</span> <span class="toc-text">1、Wrapper介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81QueryWrapper"><span class="toc-number">1.2.2.1.2.</span> <span class="toc-text">2、QueryWrapper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-UpdateWrapper"><span class="toc-number">1.2.2.1.3.</span> <span class="toc-text">3.UpdateWrapper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-condition"><span class="toc-number">1.2.2.1.4.</span> <span class="toc-text">4.condition</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-LambdaQueryWrapper"><span class="toc-number">1.2.2.1.5.</span> <span class="toc-text">5.LambdaQueryWrapper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-LambdaUpdateWrapper"><span class="toc-number">1.2.2.1.6.</span> <span class="toc-text">6.LambdaUpdateWrapper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E6%9E%84%E9%80%A0%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.2.1.7.</span> <span class="toc-text">7.构造器的使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81mybatis-plus%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">3、mybatis-plus常用插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%87%E6%B3%A8"><span class="toc-number">1.3.</span> <span class="toc-text">备注</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/08/linux/" title="linux">linux</a><time datetime="2024-09-08T13:09:31.000Z" title="发表于 2024-09-08 21:09:31">2024-09-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/27/lombok/" title="Lombok">Lombok</a><time datetime="2024-06-27T10:10:11.000Z" title="发表于 2024-06-27 18:10:11">2024-06-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/27/mybatis-plus/" title="mybatis/mybatis-plus">mybatis/mybatis-plus</a><time datetime="2024-06-27T10:10:11.000Z" title="发表于 2024-06-27 18:10:11">2024-06-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/27/restful/" title="restful">restful</a><time datetime="2024-06-27T10:10:11.000Z" title="发表于 2024-06-27 18:10:11">2024-06-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/06/27/springboot/" title="Spring Boot">Spring Boot</a><time datetime="2024-06-27T10:10:11.000Z" title="发表于 2024-06-27 18:10:11">2024-06-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By sazkii</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div></div></body></html>